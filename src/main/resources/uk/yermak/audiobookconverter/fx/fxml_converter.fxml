<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.input.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.stage.Screen?>
<?import uk.yermak.audiobookconverter.fx.BookStructureComponent?>
<?import uk.yermak.audiobookconverter.fx.FileListComponent?>
<VBox fx:controller="uk.yermak.audiobookconverter.fx.FilesController"
      xmlns:fx="http://javafx.com/fxml"
      fx:id="root"
      prefWidth="${screen.visualBounds.width * 0.70}"
      prefHeight="${screen.visualBounds.height * 0.80}"
      alignment="BOTTOM_CENTER"
>

    <fx:define>
        <Screen fx:factory="getPrimary" fx:id="screen"/>
    </fx:define>

    <MenuBar>
        <Menu fx:id="mFile" text="%menu.file">
            <Menu text="%menu.file.add">
                <MenuItem text="%menu.file.add.files" onAction="#selectFiles">
                    <accelerator>
                        <KeyCodeCombination alt="UP" code="INSERT" control="UP" meta="UP" shift="UP" shortcut="UP"/>
                    </accelerator>
                </MenuItem>

                <MenuItem text="%menu.file.add.folder" onAction="#selectFolder">
                    <accelerator>
                        <KeyCodeCombination alt="UP" code="INSERT" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                    </accelerator>
                </MenuItem>

            </Menu>
            <SeparatorMenuItem/>
            <MenuItem fx:id="removeMenu" text="%menu.file.remove" onAction="#remove">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="DELETE" control="UP" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>

            <MenuItem text="%menu.file.clear" onAction="#clear">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="DELETE" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <SeparatorMenuItem/>
            <MenuItem text="%menu.file.move_up" onAction="#moveUp">
                <accelerator>
                    <KeyCodeCombination alt="DOWN" code="UP" control="UP" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <MenuItem text="%menu.file.move_down" onAction="#moveDown">
                <accelerator>
                    <KeyCodeCombination alt="DOWN" code="DOWN" control="UP" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <SeparatorMenuItem/>
            <MenuItem text="%menu.file.exit" onAction="#exit">
                <accelerator>
                    <KeyCodeCombination alt="DOWN" code="F4" control="UP" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
        </Menu>

        <Menu fx:id="mChapter" text="%menu.chapter">
            <MenuItem text="%menu.chapter.import" onAction="#importChapters">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="I" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>

            <MenuItem text="%menu.chapter.edit" onAction="#editChapter">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="F2" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <SeparatorMenuItem/>
            <MenuItem text="%menu.chapter.combine" onAction="#combine">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="MULTIPLY" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>

            <MenuItem text="%menu.chapter.split" onAction="#split">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="DIVIDE" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <SeparatorMenuItem/>
            <MenuItem text="%menu.chapter.move_up" onAction="#moveUp">
                <accelerator>
                    <KeyCodeCombination alt="DOWN" code="UP" control="UP" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <MenuItem text="%menu.chapter.move_down" onAction="#moveDown">
                <accelerator>
                    <KeyCodeCombination alt="DOWN" code="DOWN" control="UP" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>

        </Menu>

        <Menu fx:id="mConvert" text="%menu.convert">
            <MenuItem text="%menu.convert.start" onAction="#start">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="ENTER" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <SeparatorMenuItem/>
            <MenuItem text="%menu.convert.pause_all" onAction="#pause">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="HOME" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <MenuItem text="%menu.convert.stop_all" onAction="#stop">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="END" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <MenuItem text="%menu.convert.clear_queue" onAction="#clearQueue">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="BACK_SPACE" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
        </Menu>
        <Menu text="%menu.system">
            <MenuItem text="%menu.system.settings" onAction="#settings"/>
            <MenuItem text="%menu.system.repair" onAction="#repair"/>
            <MenuItem text="%menu.system.check_version" onAction="#checkVersion"/>
        </Menu>
        <Menu fx:id="mAbout" text="%menu.about">
            <MenuItem text="%menu.about.show_hints" onAction="#showHints"/>
            <MenuItem text="%menu.about.faq" onAction="#openFAQ"/>
            <MenuItem text="%menu.about.report_bug" onAction="#openIssues"/>
            <MenuItem text="%menu.about.discussions" onAction="#openDiscussions"/>
            <MenuItem text="%menu.about.website" onAction="#openWebSite"/>
            <MenuItem text="%menu.about.about" onAction="#openAboutPage"/>
        </Menu>
    </MenuBar>

    <padding>
        <Insets top="10" right="10" bottom="10" left="10"/>
    </padding>

    <TabPane fx:id="filesChapters" HBox.hgrow="ALWAYS" VBox.vgrow="ALWAYS">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>

            <Tab text="%tab.queue" closable="false" fx:id="queueTab">
                <VBox>
                    <ToolBar>
                        <Button text="%queue.button.newbook" minWidth="${screen.visualBounds.width * 0.04}"
                                style="-fx-font-size: 15;"
                                onAction="#addFiles">
                            <tooltip>
                                <Tooltip text="%queue.tooltip.newbook"/>
                            </tooltip>
                        </Button>
                        <Separator orientation="VERTICAL"/>

                        <Button fx:id="pauseButton" text="%queue.button.pause_all"
                                minWidth="${screen.visualBounds.width * 0.04}"
                                GridPane.fillHeight="true"
                                onAction="#pause">
                            <tooltip>
                                <Tooltip text="%queue.tooltip.pause_all"/>
                            </tooltip>
                        </Button>
                        <Button fx:id="stopButton" text="%queue.button.stop_all"
                                minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#stop">
                            <tooltip>
                                <Tooltip text="%queue.tooltip.stop_all"/>
                            </tooltip>
                        </Button>
                        <Separator orientation="VERTICAL"/>

                        <Button fx:id="clearQueueButton" text="%queue.button.clear"
                                minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#clearQueue">
                            <tooltip>
                                <Tooltip text="%queue.tooltip.clear"/>
                            </tooltip>
                        </Button>

                    </ToolBar>
                    <ListView fx:id="progressQueue" prefHeight="${screen.visualBounds.height * 0.25}" VBox.vgrow="ALWAYS">
                        <tooltip>
                            <Tooltip text="%queue.tooltip.list"/>
                        </tooltip>
                    </ListView>
                </VBox>
            </Tab>


            <Tab fx:id="filesTab" text="%tab.files" closable="false">
                <VBox>
                    <ToolBar>
                        <Button text="%files.button.add" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#addFiles">
                            <tooltip>
                                <Tooltip text="%files.tooltip.button_add"/>
                            </tooltip>
                        </Button>
                        <Button text="%files.button.remove" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#remove">
                            <tooltip>
                                <Tooltip text="%files.tooltip.button_remove"/>
                            </tooltip>
                        </Button>

                        <Separator orientation="VERTICAL"/>

                        <Button fx:id="clearButton" text="%files.button.clear_all" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#clear"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%files.tooltip.button_clear"/>
                            </tooltip>
                        </Button>
                        <Separator orientation="VERTICAL"/>
                        <Button text="%files.button.move_up" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#moveUp"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%files.tooltip.button_up"/>
                            </tooltip>
                        </Button>
                        <Button text="%files.button.move_down" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#moveDown"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%files.tooltip.button_down"/>
                            </tooltip>
                        </Button>

                        <Separator orientation="VERTICAL"/>
                        <Button fx:id="importButton" text="%files.button.chapters"
                                minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#importChapters"
                                GridPane.valignment="TOP"
                                style="-fx-font-size: 15;">
                            <tooltip>
                                <Tooltip text="%files.tooltip.button_chapters"/>
                            </tooltip>
                        </Button>

                        <Separator orientation="VERTICAL"/>

                        <Button fx:id="startButton" text="%files.button.start" disable="false" GridPane.halignment="CENTER"
                                minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#start"
                                style="-fx-font-size: 15;">
                            <tooltip>
                                <Tooltip text="%files.tooltip.button_start"/>
                            </tooltip>
                        </Button>
                    </ToolBar>
                    <FileListComponent fx:id="fileList" prefHeight="${screen.visualBounds.height * 0.25}" VBox.vgrow="ALWAYS"/>
                </VBox>
            </Tab>
            <Tab fx:id="chaptersTab" text="%tab.chapters" closable="false">
                <VBox>
                    <ToolBar>
                        <Button text="%chapters.button.add" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#addFiles">
                            <tooltip>
                                <Tooltip text="%chapters.tooltip.button_add"/>
                            </tooltip>
                        </Button>
                        <Button text="%chapters.button.remove" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#remove"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%chapters.tooltip.button_remove"/>
                            </tooltip>
                        </Button>

                        <Separator orientation="VERTICAL"/>

                        <Button text="%chapters.button.clear" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#clear"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%chapters.tooltip.button_clear"/>
                            </tooltip>
                        </Button>
                        <Separator orientation="VERTICAL"/>

                        <Button text="%chapters.button.move_up" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#moveUp"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%chatpers.tooltip.button_up"/>
                            </tooltip>
                        </Button>
                        <Button text="%chapters.button.move_down" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#moveDown"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%chapters.tooltip.button_down"/>
                            </tooltip>
                        </Button>
                        <Separator orientation="VERTICAL"/>

                        <Button text="%chapters.button.edit" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#editChapter"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%chapters.tooltip.button_edit"/>
                            </tooltip>
                        </Button>
                        <Separator orientation="VERTICAL"/>

                        <Button text="%chapters.button.split" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#split"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%chapters.tooltip.button_split"/>
                            </tooltip>
                        </Button>
                        <Button text="%chapters.button.combine" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#combine"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%chapters.tooltip.button_combine"/>
                            </tooltip>
                        </Button>
                        <Separator orientation="VERTICAL"/>
                        <Button text="%chapters.button.subtracks" minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#subTracks"
                                disable="false">
                            <tooltip>
                                <Tooltip text="%chapters.tooltip.button_subtrack"/>
                            </tooltip>
                        </Button>

                        <Separator orientation="VERTICAL"/>
                        <Button text="%chapters.button.start" disable="false" GridPane.halignment="CENTER"
                                minWidth="${screen.visualBounds.width * 0.04}"
                                onAction="#start"
                                style="-fx-font-size: 15;"
                        >
                            <tooltip>
                                <Tooltip text="%chapters.tooltip.button_start"/>
                            </tooltip>
                        </Button>

                    </ToolBar>
                    <BookStructureComponent fx:id="bookStructure" editable="true" prefHeight="${screen.visualBounds.height * 0.025}" VBox.vgrow="ALWAYS">
                        <columns>
                            <TreeTableColumn text="%column.chapter.title" fx:id="chapterColumn" sortable="false"
                                             prefWidth="${screen.visualBounds.width * 0.1}"/>
                            <TreeTableColumn text="%column.chapter.duration" fx:id="durationColumn" sortable="false"/>
                            <TreeTableColumn text="%column.chapter.details" fx:id="detailsColumn" sortable="false"
                                             prefWidth="${screen.visualBounds.width * 0.2}"/>
                        </columns>
                    </BookStructureComponent>
                </VBox>
            </Tab>
        </TabPane>

    <fx:include source="mediaplayer.fxml"/>

    <TabPane fx:id="tabs" VBox.vgrow="NEVER">
        <padding>
            <Insets top="5" right="10" bottom="10" left="10"/>
        </padding>
        <Tab text="%tab.book_info" closable="false">
            <tooltip>
                <Tooltip text="%bookinfo.tooltip.tab"/>
            </tooltip>
            <fx:include source="book_info.fxml"/>
        </Tab>
        <Tab text="%tab.art_work" closable="false">
            <tooltip>
                <Tooltip text="%artwork.tooltip.tab"/>
            </tooltip>
            <fx:include source="art_work.fxml"/>
        </Tab>

        <Tab text="%tab.quality" closable="false">
            <tooltip>
                <Tooltip text="%output.tooltip.tab"/>
            </tooltip>
            <fx:include source="output.fxml"/>
        </Tab>
    </TabPane>

</VBox>
